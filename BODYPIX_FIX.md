# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ MediaPipe ‚Üí BodyPix

## ‚ùå **–ü—Ä–æ–±–ª–µ–º–∞ —Å MediaPipe:**

### **–û—à–∏–±–∫–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏:**
```
TypeError: Failed to execute 'putImageData' on 'CanvasRenderingContext2D': 
parameter 1 is not of type 'ImageData'
```

### **–ü—Ä–∏—á–∏–Ω—ã:**
1. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö** –æ—Ç MediaPipe API
2. **–ü—Ä–æ–±–ª–µ–º—ã —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏** —Å —Ä–∞–∑–Ω—ã–º–∏ –±—Ä–∞—É–∑–µ—Ä–∞–º–∏
3. **–°–ª–æ–∂–Ω–æ—Å—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏** MediaPipe –≤ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

---

## ‚úÖ **–†–µ—à–µ–Ω–∏–µ: TensorFlow.js BodyPix**

### **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ BodyPix:**
- **üõ°Ô∏è –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å** - –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
- **üåç –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–æ –≤—Å–µ—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö
- **üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - —Ö–æ—Ä–æ—à–æ –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞
- **üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è –≤–µ–±–∞

---

## üîÑ **–ß—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–æ:**

### **1. –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ (HTML head):**
```html
<!-- –ë—ã–ª–æ: MediaPipe -->
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/..."></script>

<!-- –°—Ç–∞–ª–æ: TensorFlow.js + BodyPix -->
<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.15.0/dist/tf.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/body-pix@2.2.1/dist/body-pix.min.js"></script>
```

### **2. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**
```javascript
// –ë—ã–ª–æ:
let selfieSegmentation = null;
let isMediaPipeReady = false;

// –°—Ç–∞–ª–æ:
let bodyPixModel = null;
let isAIReady = false;
```

### **3. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:**
```javascript
// –ë—ã–ª–æ: initializeMediaPipe()
async function initializeBodyPix() {
    bodyPixModel = await bodyPix.load({
        architecture: 'MobileNetV1',
        outputStride: 16,
        multiplier: 0.75,
        quantBytes: 2
    });
}
```

### **4. –§—É–Ω–∫—Ü–∏—è —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏:**
```javascript
// –ë—ã–ª–æ: segmentPersonWithMediaPipe()
async function segmentPersonWithBodyPix(imageElement) {
    const segmentation = await bodyPixModel.segmentPerson(tempCanvas, {
        flipHorizontal: false,
        internalResolution: 'medium',
        segmentationThreshold: 0.5
    });
    
    // –°–æ–∑–¥–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –º–∞—Å–∫—É –∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
    // ...
}
```

### **5. –û–±—Ä–∞–±–æ—Ç–∫–∞ –º–∞—Å–∫–∏:**
- **–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–∞–Ω–Ω—ã—Ö —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏
- **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –º–∞—Å–∫–∏** (0 –¥–ª—è —Ñ–æ–Ω–∞, 255 –¥–ª—è —á–µ–ª–æ–≤–µ–∫–∞)
- **–°–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ –∫—Ä–∞–µ–≤** –¥–ª—è –ø–ª–∞–≤–Ω—ã—Ö –ø–µ—Ä–µ—Ö–æ–¥–æ–≤

---

## üéØ **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**

### **BodyPix –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
- **Architecture:** `MobileNetV1` (–±—ã—Å—Ç—Ä–∞—è)
- **OutputStride:** `16` (–±–∞–ª–∞–Ω—Å —Å–∫–æ—Ä–æ—Å—Ç–∏/–∫–∞—á–µ—Å—Ç–≤–∞)
- **Multiplier:** `0.75` (—Ä–∞–∑–º–µ—Ä –º–æ–¥–µ–ª–∏)
- **QuantBytes:** `2` (—Å–∂–∞—Ç–∏–µ)

### **–°–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- **FlipHorizontal:** `false` (–¥–ª—è –æ–±—ã—á–Ω—ã—Ö —Ñ–æ—Ç–æ)
- **InternalResolution:** `medium` (–∫–∞—á–µ—Å—Ç–≤–æ)
- **SegmentationThreshold:** `0.5` (–ø–æ—Ä–æ–≥ —á–µ–ª–æ–≤–µ–∫–∞)

### **–†–∞–∑–º–µ—Ä –±–∏–±–ª–∏–æ—Ç–µ–∫:**
- **TensorFlow.js:** ~1.2MB
- **BodyPix –º–æ–¥–µ–ª—å:** ~2.8MB
- **–û–±—â–∏–π —Ä–∞–∑–º–µ—Ä:** ~4MB

---

## üß™ **–ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:**

### **1. –ö–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12):**
–û–∂–∏–¥–∞–µ–º—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è:
```
‚öúÔ∏è –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π –ø–æ—Ä—Ç—Ä–µ—Ç v5.1 - BodyPix Edition
üöÄ –ó–∞–≥—Ä—É–∂–∞–µ–º TensorFlow.js BodyPix...
ü§ñ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è TensorFlow.js BodyPix...
‚úÖ BodyPix –≥–æ—Ç–æ–≤!
ü§ñ BodyPix AI —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞!
```

### **2. –ü—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–æ—Ä—Ç—Ä–µ—Ç–∞:**
```
ü§ñ –ù–∞—á–∏–Ω–∞–µ–º AI —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—é...
üéØ –ò—Å–ø–æ–ª—å–∑—É—é BodyPix –¥–ª—è —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏
üéØ –ù–∞—á–∏–Ω–∞–µ–º BodyPix —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—é...
üéØ BodyPix —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞
üé® –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å BodyPix –º–∞—Å–∫–æ–π
```

### **3. Fallback –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö:**
```
‚ö†Ô∏è BodyPix –Ω–µ –≥–æ—Ç–æ–≤, –∏—Å–ø–æ–ª—å–∑—É–µ–º fallback
üîÑ Fallback: –∏—Å–ø–æ–ª—å–∑—É–µ–º –∞–ª–≥–æ—Ä–∏—Ç–º –±–µ–ª–æ–≥–æ —Ñ–æ–Ω–∞
```

---

## üöÄ **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**

### **‚úÖ –¢–µ–ø–µ—Ä—å –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å:**
- **–õ—é–±—ã–µ —Ñ–æ–Ω—ã** - –ø—Ä–∏—Ä–æ–¥–∞, –∏–Ω—Ç–µ—Ä—å–µ—Ä, —Å–ª–æ–∂–Ω—ã–µ —Å—Ü–µ–Ω—ã
- **–¢–æ—á–Ω–∞—è —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è** —á–µ–ª–æ–≤–µ–∫–∞ –æ—Ç —Ñ–æ–Ω–∞
- **–°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞** –≤–æ –≤—Å–µ—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö
- **–ù–µ—Ç –æ—à–∏–±–æ–∫** –≤ –∫–æ–Ω—Å–æ–ª–∏
- **–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã**

### **üé® –ü—Ä–æ—Ü–µ—Å—Å:**
1. **–ó–∞–≥—Ä—É–∂–∞–µ—Ç–µ —Ñ–æ—Ç–æ** —Å –ª—é–±—ã–º —Ñ–æ–Ω–æ–º
2. **BodyPix –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç** –∏ –≤—ã–¥–µ–ª—è–µ—Ç —á–µ–ª–æ–≤–µ–∫–∞
3. **–°–æ–∑–¥–∞–µ—Ç—Å—è —Ç–æ—á–Ω–∞—è –º–∞—Å–∫–∞** –∫–æ–Ω—Ç—É—Ä–æ–≤
4. **–ß–µ–ª–æ–≤–µ–∫ –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è** –∏ –ø–æ–º–µ—â–∞–µ—Ç—Å—è –Ω–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π —Ñ–æ–Ω
5. **–ü—Ä–∏–º–µ–Ω—è—é—Ç—Å—è —Ñ–∏–ª—å—Ç—Ä—ã** –∏ –ø–æ–ª—É—á–∞–µ—Ç—Å—è –ø–æ—Ä—Ç—Ä–µ—Ç

---

## üîç **–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

### **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏:**
- –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ª–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ TensorFlow.js
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –ª–∏ BodyPix
- –ù–µ—Ç –ª–∏ –æ—à–∏–±–æ–∫ JavaScript

### **–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
- **–ú–µ–¥–ª–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä–Ω–µ—Ç** - –¥–æ–ª–≥–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏
- **–°–ª–∞–±–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ** - –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –º–µ–¥–ª–µ–Ω–Ω–æ
- **–ë–ª–æ–∫–∏—Ä–æ–≤—â–∏–∫–∏** - –º–æ–≥—É—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å CDN

**–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–µ–π—á–∞—Å - –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞–º–Ω–æ–≥–æ –ª—É—á—à–µ!** üéâ
